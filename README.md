# Redundancy Workflow for Label-Studio Community Users

This project provides an automated workflow for managing annotations in Label Studio. It is designed to handle tasks from two annotators, compare their annotations, and manage any mismatched data.

## Project Description

The primary goal of this project is to streamline the process of collecting and comparing annotations from two different annotators using Label Studio. It also provides functionality for managing any mismatched data that may arise during the annotation process.

## Input

The input for this project consists of the following:

- `Input_images`: This is a folder that contains the images to be annotated.
- `json_file`: This folder contains JSON files that are used for importing tasks into Label Studio.
- `json_mismatch_file`: This is an optional folder that can be used for storing mismatched annotations after comparison.

## Output

The output of this project includes:

- `correct_annotations.csv`: This CSV file contains annotations that matched between both annotators.
- `mismatched.json`: This JSON file contains information about mismatched annotations.
- `ids.txt`: This file stores the IDs of the created Label Studio projects.
- `project_1.json` and `project_2.json`: These are snapshots of annotations from Project 1 and Project 2, generated by Label Studio export.
- Individual JSON files in `json_mismatch_file` (optional): These are separate JSON files for each mismatched annotation.

## Files

The project includes several Python scripts:

- `to_json.py`: This script creates individual JSON files for each image in the `Input_images` folder.
- `3_pre_main.py`: This script sets up projects in Label Studio, registers storage for images, and imports tasks from JSON files.
- `4_post_main.py`: This script exports snapshots from both projects, compares annotations, and saves the results to a CSV file and a JSON file.
- `5_store_mismatch.py`: This script creates individual JSON files for each mismatched annotation in a separate folder.
- `6_import_mismatch.py`: This optional script deletes existing tasks and re-imports mismatched data into Label Studio projects.
- `7_check_mismatched.py`: This script compares annotations from a snapshot with prior mismatches and iteratively searches for a correct text among subsequent snapshots provided.
- `main.py`: This script contains common functions used throughout the other scripts, such as project creation and task import.

The project also generates several files during the workflow:

- `correct_annotations.csv`
- `ids.txt`
- `mismatched.json`
- `project_1.json`
- `project_2.json`

## Instructions

To use this project, follow these steps:

1. Ensure you have the necessary API keys and URLs for Label Studio access. These should be defined in `3_pre_main.py`.
2. Place your images in the `Input_images` folder.
3. Place your JSON task files in the `json_file` folder.
4. Run `3_pre_main.py`. This will create projects in Label Studio, import tasks, and register the image storage.
5. Annotators can then complete the tasks in their respective Label Studio projects.
6. Once annotations are complete, run `4_post_main.py`. This will compare annotations, save results, and create mismatch files if necessary.
7. Optionally, you can use `5_store_mismatch.py` to create individual JSON files for each mismatch.
8. Optionally, use `6_import_mismatch.py` to re-import mismatched data into Label Studio projects for further review or adjudication.
9. Use `7_check_mismatched.py` to compare and resolve mismatches in annotations.

This project is designed to be flexible and adaptable to specific needs. If you have any questions or need further assistance, please don't hesitate to ask.
